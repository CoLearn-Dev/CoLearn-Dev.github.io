<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.92.2">
<link rel=alternate type=text/html href=https://colearn-dev.github.io/docs/protocoldoc/_print/>
<link rel=alternate type=application/rss+xml href=https://colearn-dev.github.io/docs/protocoldoc/index.xml>
<meta name=robots content="index, follow">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>gRPC Service Specification | CoLearn</title>
<meta name=description content="Read the documentation for gRPC data types and service interfaces. 
">
<meta property="og:title" content="gRPC Service Specification">
<meta property="og:description" content="Read the documentation for gRPC data types and service interfaces. 
">
<meta property="og:type" content="website">
<meta property="og:url" content="https://colearn-dev.github.io/docs/protocoldoc/"><meta property="og:site_name" content="CoLearn">
<meta itemprop=name content="gRPC Service Specification">
<meta itemprop=description content="Read the documentation for gRPC data types and service interfaces. 
"><meta name=twitter:card content="summary">
<meta name=twitter:title content="gRPC Service Specification">
<meta name=twitter:description content="Read the documentation for gRPC data types and service interfaces. 
">
<link rel=preload href=/scss/main.min.704093cd1a56f37fd00dc35c7125fced09d88d60c92d59965b30c8c0eeef1cd5.css as=style>
<link href=/scss/main.min.704093cd1a56f37fd00dc35c7125fced09d88d60c92d59965b30c8c0eeef1cd5.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">CoLearn</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/about/><span>About</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/blog/><span>Blog</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<div id=content-mobile>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
</div>
<div id=content-desktop></div>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li>
<a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgetting-started-li>
<a href=/docs/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedexample-page-li>
<a href=/docs/getting-started/example-page/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedexample-page><span>Example Page</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsexamples-li>
<a href=/docs/examples/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsexamples><span>Examples</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorials-li>
<a href=/docs/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorials><span>Tutorials</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorials1_0usecase-li>
<a href=/docs/tutorials/1_0usecase/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorials1_0usecase><span>1.0 Use Case</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorials1_1naive-li>
<a href=/docs/tutorials/1_1naive/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorials1_1naive><span>1.1 Naive Simulation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorials1_2interface-li>
<a href=/docs/tutorials/1_2interface/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorials1_2interface><span>1.2 Interface</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorials1_3http-li>
<a href=/docs/tutorials/1_3http/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorials1_3http><span>1.3 Server Implementation</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsprotocoldoc-li>
<a href=/docs/protocoldoc/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-docsprotocoldoc><span class=td-sidebar-nav-active-item>gRPC Service Specification</span></a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/camelop/dds-dev/tree/main/content/en/docs/ProtocolDoc/_index.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> View page source</a>
<a href=https://github.com/camelop/dds-dev/edit/main/content/en/docs/ProtocolDoc/_index.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/camelop/dds-dev/new/main/content/en/docs/ProtocolDoc/_index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/camelop/dds-dev/issues/new?title=gRPC%20Service%20Specification" class=td-page-meta--issue target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/google/docsy/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=https://colearn-dev.github.io/docs/protocoldoc/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a>
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#table-of-contents>Table of Contents</a></li>
<li><a href=#colinkproto>colink.proto</a>
<ul>
<li><a href=#colinkinternaltaskidlist>CoLinkInternalTaskIDList</a></li>
<li><a href=#colinkinternaltaskidwithkeypath>CoLinkInternalTaskIDWithKeyPath</a></li>
<li><a href=#confirmtaskrequest>ConfirmTaskRequest</a></li>
<li><a href=#coreinfo>CoreInfo</a></li>
<li><a href=#decision>Decision</a></li>
<li><a href=#empty>Empty</a></li>
<li><a href=#generatetokenrequest>GenerateTokenRequest</a></li>
<li><a href=#jwt>Jwt</a></li>
<li><a href=#mqqueuename>MQQueueName</a></li>
<li><a href=#participant>Participant</a></li>
<li><a href=#readkeysrequest>ReadKeysRequest</a></li>
<li><a href=#storageentries>StorageEntries</a></li>
<li><a href=#storageentry>StorageEntry</a></li>
<li><a href=#subscriberequest>SubscribeRequest</a></li>
<li><a href=#subscriptionmessage>SubscriptionMessage</a></li>
<li><a href=#task>Task</a></li>
<li><a href=#userconsent>UserConsent</a></li>
<li><a href=#colink>CoLink</a></li>
</ul>
</li>
<li><a href=#scalar-value-types>Scalar Value Types</a></li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class=td-breadcrumbs>
<ol class=breadcrumb>
<li class=breadcrumb-item>
<a href=https://colearn-dev.github.io/docs/>Documentation</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=https://colearn-dev.github.io/docs/protocoldoc/>gRPC Service Specification</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>gRPC Service Specification</h1>
<div class=lead>Read the documentation for gRPC data types and service interfaces.</div>
<header class=article-meta>
</header>
<p><a name=top></a></p>
<h2 id=table-of-contents>Table of Contents</h2>
<ul>
<li>
<p><a href=#colink-proto>colink.proto</a></p>
<ul>
<li>
<p><a href=#colink-CoLinkInternalTaskIDList>CoLinkInternalTaskIDList</a></p>
</li>
<li>
<p><a href=#colink-CoLinkInternalTaskIDWithKeyPath>CoLinkInternalTaskIDWithKeyPath</a></p>
</li>
<li>
<p><a href=#colink-ConfirmTaskRequest>ConfirmTaskRequest</a></p>
</li>
<li>
<p><a href=#colink-CoreInfo>CoreInfo</a></p>
</li>
<li>
<p><a href=#colink-Decision>Decision</a></p>
</li>
<li>
<p><a href=#colink-Empty>Empty</a></p>
</li>
<li>
<p><a href=#colink-GenerateTokenRequest>GenerateTokenRequest</a></p>
</li>
<li>
<p><a href=#colink-Jwt>Jwt</a></p>
</li>
<li>
<p><a href=#colink-MQQueueName>MQQueueName</a></p>
</li>
<li>
<p><a href=#colink-Participant>Participant</a></p>
</li>
<li>
<p><a href=#colink-ReadKeysRequest>ReadKeysRequest</a></p>
</li>
<li>
<p><a href=#colink-StorageEntries>StorageEntries</a></p>
</li>
<li>
<p><a href=#colink-StorageEntry>StorageEntry</a></p>
</li>
<li>
<p><a href=#colink-SubscribeRequest>SubscribeRequest</a></p>
</li>
<li>
<p><a href=#colink-SubscriptionMessage>SubscriptionMessage</a></p>
</li>
<li>
<p><a href=#colink-Task>Task</a></p>
</li>
<li>
<p><a href=#colink-UserConsent>UserConsent</a></p>
</li>
<li>
<p><a href=#colink-CoLink>CoLink</a></p>
</li>
</ul>
</li>
<li>
<p><a href=#scalar-value-types>Scalar Value Types</a></p>
</li>
</ul>
<p><a name=colink-proto></a></p>
<p align=right><a href=#top>Top</a></p>
<h2 id=colinkproto>colink.proto</h2>
<p><a name=colink-CoLinkInternalTaskIDList></a></p>
<h3 id=colinkinternaltaskidlist>CoLinkInternalTaskIDList</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>task_ids_with_key_paths</td>
<td><a href=#colink-CoLinkInternalTaskIDWithKeyPath>CoLinkInternalTaskIDWithKeyPath</a></td>
<td>repeated</td>
<td></td>
</tr>
</tbody>
</table>
<p><a name=colink-CoLinkInternalTaskIDWithKeyPath></a></p>
<h3 id=colinkinternaltaskidwithkeypath>CoLinkInternalTaskIDWithKeyPath</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>key_path</td>
<td><a href=#string>string</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td>task_id</td>
<td><a href=#string>string</a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><a name=colink-ConfirmTaskRequest></a></p>
<h3 id=confirmtaskrequest>ConfirmTaskRequest</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>task_id</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The id of this task.</td>
</tr>
<tr>
<td>decision</td>
<td><a href=#colink-Decision>Decision</a></td>
<td></td>
<td>The decision of this task.</td>
</tr>
</tbody>
</table>
<p><a name=colink-CoreInfo></a></p>
<h3 id=coreinfo>CoreInfo</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>mq_uri</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The URI of MQ.</td>
</tr>
<tr>
<td>core_public_key</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>The public key of the core, serialized in compact (default) form.</td>
</tr>
</tbody>
</table>
<p><a name=colink-Decision></a></p>
<h3 id=decision>Decision</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>is_approved</td>
<td><a href=#bool>bool</a></td>
<td></td>
<td>Approved / Rejected</td>
</tr>
<tr>
<td>is_rejected</td>
<td><a href=#bool>bool</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td>reason</td>
<td><a href=#string>string</a></td>
<td></td>
<td>Reason</td>
</tr>
<tr>
<td>signature</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>Signature</td>
</tr>
<tr>
<td>core_public_key</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>Core's public key</td>
</tr>
<tr>
<td>user_consent</td>
<td><a href=#colink-UserConsent>UserConsent</a></td>
<td></td>
<td>User consent</td>
</tr>
</tbody>
</table>
<p><a name=colink-Empty></a></p>
<h3 id=empty>Empty</h3>
<p><a name=colink-GenerateTokenRequest></a></p>
<h3 id=generatetokenrequest>GenerateTokenRequest</h3>
<p>Contains the new expiration time to be set for the generated token.</p>
<p>The old token is contained in the header of this request, under the 'authorization' field.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>expiration_time</td>
<td><a href=#int64>int64</a></td>
<td></td>
<td>The new expiration time for the token, in unix timestamp format.</td>
</tr>
<tr>
<td>privilege</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The privilege of the generated jwt.</td>
</tr>
</tbody>
</table>
<p><a name=colink-Jwt></a></p>
<h3 id=jwt>Jwt</h3>
<p>JSON Web Token (JWT) that is used to authenticate a user. The JWT the user's privilege, user_id - which is the base64 encoding of the public key - and the expiration time.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>jwt</td>
<td><a href=#string>string</a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><a name=colink-MQQueueName></a></p>
<h3 id=mqqueuename>MQQueueName</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>queue_name</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The name of the generated queue for this subscription.</td>
</tr>
</tbody>
</table>
<p><a name=colink-Participant></a></p>
<h3 id=participant>Participant</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>user_id</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The user id of this participant.</td>
</tr>
<tr>
<td>role</td>
<td><a href=#string>string</a></td>
<td></td>
<td>Role of this participant in the protocol.</td>
</tr>
</tbody>
</table>
<p><a name=colink-ReadKeysRequest></a></p>
<h3 id=readkeysrequest>ReadKeysRequest</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>prefix</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The prefix of the key_path of the entries to be retrieved.</td>
</tr>
<tr>
<td>include_history</td>
<td><a href=#bool>bool</a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><a name=colink-StorageEntries></a></p>
<h3 id=storageentries>StorageEntries</h3>
<p>A list of entries.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entries</td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td>repeated</td>
<td></td>
</tr>
</tbody>
</table>
<p><a name=colink-StorageEntry></a></p>
<h3 id=storageentry>StorageEntry</h3>
<p>An entry in the CoLink storage.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>key_name</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The key name of the entry.</td>
</tr>
<tr>
<td>key_path</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The path of this entry. May contain information about the user_id, application_id, key name, and the timestamp of the entry. Note that, unlike other timestamps used in the protocol, the timestamp in the key_path is the number of <em>non-leap-nanoseconds</em> since January 1, 1970 UT, which is different from the unix timestamp.</td>
</tr>
<tr>
<td>payload</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>The payload (value) of the entry.</td>
</tr>
</tbody>
</table>
<p><a name=colink-SubscribeRequest></a></p>
<h3 id=subscriberequest>SubscribeRequest</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>key_name</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The key_name of the entry to be subscribed.</td>
</tr>
<tr>
<td>start_timestamp</td>
<td><a href=#int64>int64</a></td>
<td></td>
<td>start_timestamp, in the same format as the timestamp in the storage. Not in unix timestamp format.</td>
</tr>
</tbody>
</table>
<p><a name=colink-SubscriptionMessage></a></p>
<h3 id=subscriptionmessage>SubscriptionMessage</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>change_type</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The type of change of the storage entry. valid values: create/update/delete/in-storage.</td>
</tr>
<tr>
<td>key_path</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The key_path of the storage entry.</td>
</tr>
<tr>
<td>payload</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>The payload (value) of the storage entry.</td>
</tr>
</tbody>
</table>
<p><a name=colink-Task></a></p>
<h3 id=task>Task</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>task_id</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The id of this task.</td>
</tr>
<tr>
<td>protocol_name</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The protocol of this task.</td>
</tr>
<tr>
<td>protocol_param</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>The protocol parameters (after serialization).</td>
</tr>
<tr>
<td>participants</td>
<td><a href=#colink-Participant>Participant</a></td>
<td>repeated</td>
<td>The list of participants (initiator should be placed first).</td>
</tr>
<tr>
<td>parent_task</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The task id of the parent task.</td>
</tr>
<tr>
<td>require_agreement</td>
<td><a href=#bool>bool</a></td>
<td></td>
<td>Whether the task requires the signed decisions from all participants to start. If require_agreement=False, the task starts without confirming replies from others.</td>
</tr>
<tr>
<td>decisions</td>
<td><a href=#colink-Decision>Decision</a></td>
<td>repeated</td>
<td>The list of decisions (align with participants).</td>
</tr>
<tr>
<td>status</td>
<td><a href=#string>string</a></td>
<td></td>
<td>The status of this task.</td>
</tr>
<tr>
<td>expiration_time</td>
<td><a href=#int64>int64</a></td>
<td></td>
<td>The expiration time for waiting for others' decisions, in unix timestamp format.</td>
</tr>
</tbody>
</table>
<p><a name=colink-UserConsent></a></p>
<h3 id=userconsent>UserConsent</h3>
<p>Import a user from an existing public/secret key pair.</p>
<p>A signature by the user is required to verify the user's consent to let the core represent the user.</p>
<p>The signature message is the concatenation of user public key, timestamp at the time of signing, expiration timestamp, and core public key.
The signature will be saved in user's storage and get passed in inter-core communication, so other cores can ensure the core is representing the user by checking both public keys.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>public_key</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>The public key of the user, serialized in compact (default) form.</td>
</tr>
<tr>
<td>signature_timestamp</td>
<td><a href=#int64>int64</a></td>
<td></td>
<td>Unix timestamp of time of signature, in unix timestamp format. The signature should be generated within 10 minutes of the time of signature verification</td>
</tr>
<tr>
<td>expiration_timestamp</td>
<td><a href=#int64>int64</a></td>
<td></td>
<td>The expiration timestamp for the token to be generated, and for the user consent, in unix timestamp format. We assume the JWT will have the same expiration time as the user consent.</td>
</tr>
<tr>
<td>signature</td>
<td><a href=#bytes>bytes</a></td>
<td></td>
<td>The ECDSA compact signature composed of user public key, timestamp at the time of signing, expiration timestamp, and core public key. The signature represents the user's consent to let the core represent the user by including the trusted core's public key.</td>
</tr>
</tbody>
</table>
<p><a name=colink-CoLink></a></p>
<h3 id=colink>CoLink</h3>
<table>
<thead>
<tr>
<th>Method Name</th>
<th>Request Type</th>
<th>Response Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GenerateToken</td>
<td><a href=#colink-GenerateTokenRequest>GenerateTokenRequest</a></td>
<td><a href=#colink-Jwt>Jwt</a></td>
<td>Given a valid JWT and a expiration timestamp, generates a new JWT token with the expiration time set to the input timestamp. Requires user jwt. You cannot refresh an host JWT.</td>
</tr>
<tr>
<td>ImportUser</td>
<td><a href=#colink-UserConsent>UserConsent</a></td>
<td><a href=#colink-Jwt>Jwt</a></td>
<td>Generates a JWT from a user with a public/secret key pair. The generated JWT specifies the user's privilege as a user, contains their user_id, which is a base64 encoding of the provided public key. Requires host JWT.</td>
</tr>
<tr>
<td>CreateEntry</td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td>Creates an entry in CoLink storage. In the entry passed in to the call, the <code>key_name</code> field must be nonempty. Every other field is is ignored. Requires user or host JWT. Returns a key_path with current timestamp included.</td>
</tr>
<tr>
<td>ReadEntries</td>
<td><a href=#colink-StorageEntries>StorageEntries</a></td>
<td><a href=#colink-StorageEntries>StorageEntries</a></td>
<td>Retrieves entries from CoLink storage. One and only one field among <code>key_name</code> and <code>key_path</code> is nonempty. If both are nonempty, an error is returned. If key_name is nonempty, returns the latest version of the entry with that key name. This is done by first obtaining the timestamp representing the latest version of the entry, and then retrieving the entry with that timestamp by including the timestamp in key_path. If key_path is nonempty, returns the entry with the corresponding key path. If you're looking for a specific version of an entry, use specify the timestamp inside the <code>key_path</code> field. In both cases, the key_name field is empty in the returned StorageEntry. key_path and payload are nonempty. If an entry is not found. An error is returned. Note that the returned order of the entries is NOT guaranteed to be the same as the order of the input. Requires user or host JWT.</td>
</tr>
<tr>
<td>UpdateEntry</td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td>Updates an entry in CoLink storage. In the entry passed in to the call, the <code>key_name</code> field must be nonempty. Every other field is is ignored. Creates a new entry with the current timestamp in the key_path field. Sets the latest entry to current timestamp. Requires user or host JWT. Returns a key_path with current timestamp included.</td>
</tr>
<tr>
<td>DeleteEntry</td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td><a href=#colink-StorageEntry>StorageEntry</a></td>
<td>Deletes an entry from CoLink storage. Sets the latest entry to current timestamp, but unlike UpdateEntry, we do not create a new entry with the current timestamp in the key_path field. Therefore the current timestamp points to nothing. Requires user or host JWT. Returns a key_path with current timestamp included.</td>
</tr>
<tr>
<td>ReadKeys</td>
<td><a href=#colink-ReadKeysRequest>ReadKeysRequest</a></td>
<td><a href=#colink-StorageEntries>StorageEntries</a></td>
<td>Returns list of entries in CoLink storage whose key_path starts with input prefix. Requires user or host JWT.</td>
</tr>
<tr>
<td>CreateTask</td>
<td><a href=#colink-Task>Task</a></td>
<td><a href=#colink-Task>Task</a></td>
<td>An initiator creates a task. Generate a task_id for this task. Represent user(initiator) to sign a decision for this task. Sync this task with other participants. Update task status in storage. In request, protocol_name, protocol_param, participants are required. parent_task is optional. In response, only task_id will be included. Require user JWT.</td>
</tr>
<tr>
<td>ConfirmTask</td>
<td><a href=#colink-ConfirmTaskRequest>ConfirmTaskRequest</a></td>
<td><a href=#colink-Empty>Empty</a></td>
<td>A participant confirms a task. Represent user to sign a decision for this task. Sync the decision to the initiator. Update task status in storage. The task will be ignored if is_approved and is_rejected are both false in the decision. In request, task_id is required. Require user JWT.</td>
</tr>
<tr>
<td>FinishTask</td>
<td><a href=#colink-Task>Task</a></td>
<td><a href=#colink-Empty>Empty</a></td>
<td>A participant finishes a task. Update task status in storage. In request, task_id is required. Require user JWT.</td>
</tr>
<tr>
<td>RequestCoreInfo</td>
<td><a href=#colink-Empty>Empty</a></td>
<td><a href=#colink-CoreInfo>CoreInfo</a></td>
<td>Request the information of the core, including the URI of MQ, and the public key of the core. Return MQ Information optionally and core public key for this user. JWT is optional: when request includes jwt, the uri of mq will be returned.</td>
</tr>
<tr>
<td>Subscribe</td>
<td><a href=#colink-SubscribeRequest>SubscribeRequest</a></td>
<td><a href=#colink-MQQueueName>MQQueueName</a></td>
<td>Subscribe to changes in the storage. It will let you subscribe to all changes of key_name in storage since start_timestamp. The subscription message is formatted in SubscriptionMessage. Require user JWT.</td>
</tr>
<tr>
<td>Unsubscribe</td>
<td><a href=#colink-MQQueueName>MQQueueName</a></td>
<td><a href=#colink-Empty>Empty</a></td>
<td>Unsubscribe the changes in the storage. Require user JWT.</td>
</tr>
<tr>
<td>InterCoreSyncTask</td>
<td><a href=#colink-Task>Task</a></td>
<td><a href=#colink-Empty>Empty</a></td>
<td>InterCore RPC. Sync a task. If it receives a task with unknown task_id, then create this task in storage and send task status to MQ. Otherwise, update decisions in storage. If all participants' decisions are received and it is the initiator, sync the decisions to other participants. If all participants' decisions are received, send task status to MQ. The task status in the request should be ignored even if it exists. Require guest or user JWT.</td>
</tr>
</tbody>
</table>
<h2 id=scalar-value-types>Scalar Value Types</h2>
<table>
<thead>
<tr>
<th>.proto Type</th>
<th>Notes</th>
<th>C++</th>
<th>Java</th>
<th>Python</th>
<th>Go</th>
<th>C#</th>
<th>PHP</th>
<th>Ruby</th>
</tr>
</thead>
<tbody>
<tr>
<td><a name=double> double</td>
<td></td>
<td>double</td>
<td>double</td>
<td>float</td>
<td>float64</td>
<td>double</td>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td><a name=float> float</td>
<td></td>
<td>float</td>
<td>float</td>
<td>float</td>
<td>float32</td>
<td>float</td>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td><a name=int32> int32</td>
<td>Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead.</td>
<td>int32</td>
<td>int</td>
<td>int</td>
<td>int32</td>
<td>int</td>
<td>integer</td>
<td>Bignum or Fixnum (as required)</td>
</tr>
<tr>
<td><a name=int64> int64</td>
<td>Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead.</td>
<td>int64</td>
<td>long</td>
<td>int/long</td>
<td>int64</td>
<td>long</td>
<td>integer/string</td>
<td>Bignum</td>
</tr>
<tr>
<td><a name=uint32> uint32</td>
<td>Uses variable-length encoding.</td>
<td>uint32</td>
<td>int</td>
<td>int/long</td>
<td>uint32</td>
<td>uint</td>
<td>integer</td>
<td>Bignum or Fixnum (as required)</td>
</tr>
<tr>
<td><a name=uint64> uint64</td>
<td>Uses variable-length encoding.</td>
<td>uint64</td>
<td>long</td>
<td>int/long</td>
<td>uint64</td>
<td>ulong</td>
<td>integer/string</td>
<td>Bignum or Fixnum (as required)</td>
</tr>
<tr>
<td><a name=sint32> sint32</td>
<td>Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s.</td>
<td>int32</td>
<td>int</td>
<td>int</td>
<td>int32</td>
<td>int</td>
<td>integer</td>
<td>Bignum or Fixnum (as required)</td>
</tr>
<tr>
<td><a name=sint64> sint64</td>
<td>Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s.</td>
<td>int64</td>
<td>long</td>
<td>int/long</td>
<td>int64</td>
<td>long</td>
<td>integer/string</td>
<td>Bignum</td>
</tr>
<tr>
<td><a name=fixed32> fixed32</td>
<td>Always four bytes. More efficient than uint32 if values are often greater than 2^28.</td>
<td>uint32</td>
<td>int</td>
<td>int</td>
<td>uint32</td>
<td>uint</td>
<td>integer</td>
<td>Bignum or Fixnum (as required)</td>
</tr>
<tr>
<td><a name=fixed64> fixed64</td>
<td>Always eight bytes. More efficient than uint64 if values are often greater than 2^56.</td>
<td>uint64</td>
<td>long</td>
<td>int/long</td>
<td>uint64</td>
<td>ulong</td>
<td>integer/string</td>
<td>Bignum</td>
</tr>
<tr>
<td><a name=sfixed32> sfixed32</td>
<td>Always four bytes.</td>
<td>int32</td>
<td>int</td>
<td>int</td>
<td>int32</td>
<td>int</td>
<td>integer</td>
<td>Bignum or Fixnum (as required)</td>
</tr>
<tr>
<td><a name=sfixed64> sfixed64</td>
<td>Always eight bytes.</td>
<td>int64</td>
<td>long</td>
<td>int/long</td>
<td>int64</td>
<td>long</td>
<td>integer/string</td>
<td>Bignum</td>
</tr>
<tr>
<td><a name=bool> bool</td>
<td></td>
<td>bool</td>
<td>boolean</td>
<td>boolean</td>
<td>bool</td>
<td>bool</td>
<td>boolean</td>
<td>TrueClass/FalseClass</td>
</tr>
<tr>
<td><a name=string> string</td>
<td>A string must always contain UTF-8 encoded or 7-bit ASCII text.</td>
<td>string</td>
<td>String</td>
<td>str/unicode</td>
<td>string</td>
<td>string</td>
<td>string</td>
<td>String (UTF-8)</td>
</tr>
<tr>
<td><a name=bytes> bytes</td>
<td>May contain any arbitrary sequence of bytes.</td>
<td>string</td>
<td>ByteString</td>
<td>str</td>
<td>[]byte</td>
<td>ByteString</td>
<td>string</td>
<td>String (ASCII-8BIT)</td>
</tr>
</tbody>
</table>
<div class=section-index>
</div>
<div class="text-muted mt-5 pt-3 border-top">
Last modified July 19, 2022: <a href=https://github.com/camelop/dds-dev/commit/6dcdded12fb0b8223541793451b449a03b5912db>
6dcdded</a>
</div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list">
<a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="User mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://example.org/twitter aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow">
<a class=text-white target=_blank rel=noopener href=https://example.org/stack aria-label="Stack Overflow">
<i class="fab fa-stack-overflow"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/google/docsy aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list">
<a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<p class=mt-2><a href=/about/>About CoLearn</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.9527cedfef7fd2d44b9f7e019d1d3f20914d42e1280da7342a1a7facd3249a54.js integrity="sha256-lSfO3+9/0tRLn34BnR0/IJFNQuEoDac0Khp/rNMkmlQ=" crossorigin=anonymous></script>
</body>
</html>